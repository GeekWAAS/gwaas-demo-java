<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Order Paid Success</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.6.2/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

</head>
<body>
<div class="container">

    <pre class="pre-scrollable" id="result"></pre>
</div>
<script type="text/javascript">
    const urlParams = new URLSearchParams(location.search);
    const orderNo = urlParams.get('order')
    let orderStatus = await sendAjaxRequest('/service/acquire-orders?orderId=' + orderNo, 'GET')
    document.getElementById('result').innerText = JSON.stringify(orderStatus, null, 4)

    function sendAjaxRequest(url, method, data) {
        return new Promise((resolve, reject) => {
            let xhr = new XMLHttpRequest()
            xhr.open(method, url)
            xhr.setRequestHeader('Content-Type', 'application/json')
            xhr.responseType = 'json'
            xhr.onload = function () {
                const resp = xhr.response
                resolve(resp)
            }
            if (data) {
                xhr.send(JSON.stringify(data))
            } else {
                xhr.send()
            }
        })
    }
</script>
</body>
</html>